(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{13:function(e,a,t){e.exports=t(27)},24:function(e,a,t){},25:function(e,a,t){},26:function(e,a,t){},27:function(e,a,t){"use strict";t.r(a);var s=t(0),m=t.n(s),n=t(3),r=t(1),c=t(4),o=t(11),l=(t(23),t(2)),i=t(12);var d={getMessages:"".concat("/json/","messages"),getMembers:"".concat("/json/","members")};const p=e=>a=>{a({type:"REQUEST_MESSAGES"});const t=[fetch(d.getMessages).then(e=>e.json())];return e&&t.push(fetch(d.getMembers).then(e=>e.json())),Promise.all(t).then(e=>a(((e=[])=>({type:"RECEIVED_MESSAGES",messages:e[0],members:e[1],receivedAt:Date.now()}))(e)))},u=(e,a)=>{const t={};a.forEach(e=>{t[e.id]=e});let s=e.map(e=>((e,a)=>{const t=e.id,s=e.message,m=e.timestamp,n=e.userId,r=a.firstName,c=a.lastName,o=a.email,l=a.avatar;return{fullName:"".concat(r," ").concat(c),email:o,avatar:l,messageId:t,message:s,timestamp:m,formattedTimeString:Object(i.a)(new Date(m),{addSuffix:!0}),userId:n}})(e,t[e.userId]));return s.sort((e,a)=>{const t=new Date(e.timestamp),s=new Date(a.timestamp);return t<s?-1:t>s?1:0}),{populatedMessages:s,membersMap:t}},E={messages:[],members:[],status:"start"};var g=(e=E,a)=>{switch(a.type){case"RECEIVED_MESSAGES":const t=u(a.messages,a.members),s=t.populatedMessages,m=t.membersMap;return Object(l.a)(Object(l.a)({},e),{},{messages:s,membersMap:m,status:"finished"});case"REQUEST_MESSAGES":return Object(l.a)(Object(l.a)({},e),{},{status:"loading"});default:return e}};t(24);var b=({message:e,messageId:a,fullName:t,email:s,avatar:n,formattedTimeString:r})=>m.a.createElement("div",{className:"message-card",key:a},m.a.createElement("div",{className:"message-card__name"},t),n?m.a.createElement("div",{className:"message-card__img tooltip"},m.a.createElement("div",{className:"tooltiptext"},s),m.a.createElement("img",{src:n,alt:s})):null,m.a.createElement("div",{className:"message-card__content"},e),m.a.createElement("div",{className:"message-card__time"},r));t(25);var v=()=>m.a.createElement("div",{className:"loader"},m.a.createElement("div",{className:"loader__content"}));t(26);class f extends s.Component{componentDidMount(){var e;(0,this.props.dispatch)((e=!0,a=>a(p(e))))}componentDidUpdate(e){}render(){const e=this.props,a=e.messages,t=e.status;return console.log("-- status --",t),m.a.createElement("div",{className:"app"},m.a.createElement("div",{className:"app__content"},"loading"===t?m.a.createElement(v,null):null,a.map(e=>m.a.createElement(b,e))))}}var S=Object(c.b)(e=>({messages:e.messages,membersMap:e.membersMap,status:e.status}))(f);const M=[o.a];const _=Object(r.c)(g,Object(r.a)(...M));Object(n.render)(m.a.createElement(c.a,{store:_},m.a.createElement(S,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.b879f554.chunk.js.map